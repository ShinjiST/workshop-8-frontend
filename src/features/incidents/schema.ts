import { z } from "zod";

export const incidentSchema = z.object({
  // üëá –°–ü–†–û–©–ï–ù–û: –ü—Ä–∏–±—Ä–∞–ª–∏ .refine(), –∑–∞–ª–∏—à–∏–ª–∏ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –ø–æ—Ä–æ–∂–Ω—î –ø–æ–ª–µ
  // type="datetime-local" —Å–∞–º –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ç–∞–º –±—É–¥–µ –¥–∞—Ç–∞ –∞–±–æ –Ω—ñ—á–æ–≥–æ
  inc_date: z.string().min(1, "–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É —Ç–∞ —á–∞—Å"),

  inc_type: z.string()
    .min(1, "–í–≤–µ–¥—ñ—Ç—å —Ç–∏–ø —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—É")
    .max(50, "–ù–∞–∑–≤–∞ —Ç–∏–ø—É –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∞ (–º–∞–∫—Å 50)"),

  inc_description: z.string()
    .min(1, "–û–ø–∏—à—ñ—Ç—å, —â–æ —Ç—Ä–∞–ø–∏–ª–æ—Å—å")
    .max(500, "–û–ø–∏—Å –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π (–º–∞–∫—Å 500)"),

  inc_status: z.string()
    .min(1, "–í–∫–∞–∂—ñ—Ç—å —Å—Ç–∞—Ç—É—Å"),

  // ID –°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞
  e_id: z.preprocess(
    (value) => Number(value),
    z.number({ message: "–û–±–µ—Ä—ñ—Ç—å —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞" })
      .int()
      .positive("–û–±–µ—Ä—ñ—Ç—å —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞")
  ),

  // ID –ü–∞—Ä–∫–æ–º—ñ—Å—Ü—è
  ps_id: z.preprocess(
    (value) => Number(value),
    z.number({ message: "–û–±–µ—Ä—ñ—Ç—å –ø–∞—Ä–∫–æ–º—ñ—Å—Ü–µ" })
      .int()
      .positive("–û–±–µ—Ä—ñ—Ç—å –ø–∞—Ä–∫–æ–º—ñ—Å—Ü–µ")
  ),
});

export type IncidentFormValues = z.infer<typeof incidentSchema>;